{"version":3,"sources":["../src/status.js"],"names":["define","$","str","ajax","notification","Status","bind","status","data","localStorage","setItem","call","methodname","args","done","get_string","hide","window","location","reload","fail","exception","show"],"mappings":"AAAAA,OAAM,wBAAC,CAAC,QAAD,CAAW,UAAX,CAAuB,WAAvB,CAAoC,mBAApC,CAAD,CACN,SAASC,CAAT,CAAYC,CAAZ,CAAiBC,CAAjB,CAAuBC,CAAvB,CAAqC,CAwCjC,MAvCa,SAATC,CAAAA,MAAS,EAAW,CAapBJ,CAAC,CAAC,cAAD,CAAD,CAAkBK,IAAlB,CAAuB,OAAvB,CAAgC,UAAU,CACtC,GAAIC,CAAAA,CAAM,CAAGN,CAAC,CAAC,IAAD,CAAD,CAAQO,IAAR,CAAa,OAAb,CAAb,CACAC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAoCH,CAApC,EAEAJ,CAAI,CAACQ,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,0BADL,CAEPC,IAAI,CAAE,CACFN,MAAM,CAAEA,CADN,CAFC,CAKPO,IAAI,CAAE,SAASN,CAAT,CAAe,CACjBN,CAAG,CAACa,UAAJ,CAAeP,CAAf,CAAqB,WAArB,EACKM,IADL,CACU,UAAW,CAEbb,CAAC,CAAC,gBAAD,CAAD,CAAoBe,IAApB,GACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,EACH,CALL,CAMH,CAPK,CAOJb,IAPI,CAOC,IAPD,CALC,CAaPc,IAAI,CAAEhB,CAAY,CAACiB,SAbZ,CAAD,CAAV,CAeH,CAnBD,EAqBApB,CAAC,CAAC,aAAD,CAAD,CAAiBK,IAAjB,CAAsB,OAAtB,CAA+B,UAAW,CACtCL,CAAC,CAAC,gBAAD,CAAD,CAAoBqB,IAApB,EACH,CAFD,CAGH,CAGJ,CA1CK,CAAN","sourcesContent":["define(['jquery', 'core/str', 'core/ajax', 'core/notification'],\nfunction($, str, ajax, notification) {\n    var Status = function() {\n        // var st = localStorage.getItem('ovms-status');\n\n        // if (!st) {\n        //     $('#status_picker').show();\n            // localStorage.setItem('ovms-status', 'student');\n        // } else {\n            // str.get_string(st, 'ovmsurvey')\n            //     .done(function(s) {\n            //         $('#ovm-status').text(s);\n            //     });\n        // }\n\n        $('.status-item').bind('click', function(){\n            var status = $(this).data('value');\n            localStorage.setItem('ovms-status', status);\n\n            ajax.call([{\n                methodname: 'mod_ovmsurvey_set_status',\n                args: {\n                    status: status\n                },\n                done: function(data) {\n                    str.get_string(data, 'ovmsurvey')\n                        .done(function() {\n                            // $('#ovm-status').text(s);\n                            $('#status_picker').hide();\n                            window.location.reload();\n                        });\n                }.bind(this),\n                fail: notification.exception\n            }]);\n        });\n\n        $('#ovm-status').bind('click', function() {\n            $('#status_picker').show();\n        });\n    };\n\n    return Status;\n});"],"file":"status.min.js"}