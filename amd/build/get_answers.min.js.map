{"version":3,"sources":["../src/get_answers.js"],"names":["define","$","ajax","notification","GetAnswers","selector","surveyId","total","_region","_surveyid","_totalStmts","_setUserChoices","prototype","call","methodname","args","surveyid","done","data","parseData","length","activeReviewButton","bind","fail","exception","len","i","qid","rid","elem","find","addClass","parent","removeClass"],"mappings":"AAAAA,OAAM,6BAAC,CAAC,QAAD,CAAW,WAAX,CAAwB,mBAAxB,CAAD,CACN,SAASC,CAAT,CAAYC,CAAZ,CAAkBC,CAAlB,CAAgC,CAE5B,GAAIC,CAAAA,CAAU,CAAG,SAASC,CAAT,CAAmBC,CAAnB,CAA6BC,CAA7B,CAAoC,CACjD,KAAKC,OAAL,CAAeP,CAAC,CAACI,CAAD,CAAhB,CACA,KAAKI,SAAL,CAAiBH,CAAjB,CACA,KAAKI,WAAL,CAAmBH,CAAnB,CAEA,KAAKI,eAAL,EACH,CAND,CAQAP,CAAU,CAACQ,SAAX,CAAqBD,eAArB,CAAuC,UAAW,CAC9CT,CAAI,CAACW,IAAL,CAAU,CAAC,CACPC,UAAU,CAAE,2BADL,CAEPC,IAAI,CAAE,CACFC,QAAQ,CAAE,KAAKP,SADb,CAFC,CAKPQ,IAAI,CAAE,SAASC,CAAT,CAAe,CACjB,KAAKC,SAAL,CAAeD,CAAf,EAEA,GAAI,KAAKR,WAAL,EAAoBQ,CAAI,CAACE,MAA7B,CAAqC,CACjC,KAAKC,kBAAL,EACH,CAED,QACH,CARK,CAQJC,IARI,CAQC,IARD,CALC,CAcPC,IAAI,CAAEpB,CAAY,CAACqB,SAdZ,CAAD,CAAV,CAgBH,CAjBD,CAmBApB,CAAU,CAACQ,SAAX,CAAqBO,SAArB,CAAiC,SAASD,CAAT,CAAe,CAE5C,OADIO,CAAAA,CAAG,CAAGP,CAAI,CAACE,MACf,CAAQM,CAAC,CAAG,CAAZ,CAAeA,CAAC,CAAGD,CAAnB,CAAwBC,CAAC,EAAzB,CAA6B,IACrBC,CAAAA,CAAG,CAAGT,CAAI,CAACQ,CAAD,CAAJ,YADe,CAErBE,CAAG,CAAGV,CAAI,CAACQ,CAAD,CAAJ,SAFe,CAGrBG,CAAI,CAAG5B,CAAC,CAAC,KAAKO,OAAN,CAAD,CAAgBsB,IAAhB,CAAqB,yBAA0BH,CAA1B,CAAgC,mBAAhC,CAAoDC,CAApD,CAA0D,KAA/E,CAHc,CAIzBC,CAAI,CAACE,QAAL,CAAc,QAAd,EACAF,CAAI,CAACG,MAAL,GAAcA,MAAd,GAAuBA,MAAvB,GAAgCA,MAAhC,GAAyCA,MAAzC,GAAkDF,IAAlD,CAAuD,YAAvD,EAAqEG,WAArE,CAAiF,QAAjF,CACH,CACJ,CATD,CAWA7B,CAAU,CAACQ,SAAX,CAAqBS,kBAArB,CAA0C,UAAW,CACjDpB,CAAC,CAAC,0BAAD,CAAD,CAA8BgC,WAA9B,CAA0C,UAA1C,EACAhC,CAAC,CAAC,wBAAD,CAAD,CAA4BgC,WAA5B,CAAwC,QAAxC,CACH,CAHD,CAKA,MAAO7B,CAAAA,CACV,CA/CK,CAAN","sourcesContent":["define(['jquery', 'core/ajax', 'core/notification'],\nfunction($, ajax, notification) {\n\n    var GetAnswers = function(selector, surveyId, total) {\n        this._region = $(selector);\n        this._surveyid = surveyId;\n        this._totalStmts = total;\n\n        this._setUserChoices();\n    };\n\n    GetAnswers.prototype._setUserChoices = function() {\n        ajax.call([{\n            methodname: 'mod_ovmsurvey_get_answers',\n            args: {\n                surveyid: this._surveyid\n            },\n            done: function(data) {\n                this.parseData(data);\n\n                if (this._totalStmts == data.length) {\n                    this.activeReviewButton();\n                }\n\n                return true;\n            }.bind(this),\n            fail: notification.exception\n        }]);\n    };\n\n    GetAnswers.prototype.parseData = function(data) {\n        var len = data.length;\n        for(var i = 0; i < len; i++) {\n            var qid = data[i]['question_id'];\n            var rid = data[i]['response'];\n            var elem = $(this._region).find('.ovm-option[data-id=\"' + qid + '\"][data-value=\"' + rid + '\"]');\n            elem.addClass('active');\n            elem.parent().parent().parent().parent().parent().find('.check-svg').removeClass('hidden');\n        }\n    };\n\n    GetAnswers.prototype.activeReviewButton = function() {\n        $('#ovmsurvey-review-button').removeClass(\"disabled\");\n        $('#ovmsurvey-review-link').removeClass(\"hidden\");\n    };\n\n    return GetAnswers;\n});"],"file":"get_answers.min.js"}